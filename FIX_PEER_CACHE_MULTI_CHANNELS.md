# å¤šé¢‘é“ Peer ID ç¼“å­˜å¤±æ•ˆé—®é¢˜ä¿®å¤ (v2.3.3)

## é—®é¢˜æè¿°

### ç°è±¡
- å¤šä¸ªç›‘æ§é¢‘é“ ID æ— æ³•è¢« Pyrogram è§£æï¼š-1002314545813, -1002201840184, -1002529437122
- é”™è¯¯å‘ç”Ÿåœ¨æ¶ˆæ¯å¤„ç†æ—¶ï¼ˆç‰¹åˆ«æ˜¯ reply_to_message è§£æé˜¶æ®µï¼‰
- Pyrogram storage ä¸­ç¼ºå°‘è¿™äº›é¢‘é“çš„ peer ä¿¡æ¯
- å¯¼è‡´ auto_forward å¾ªç¯ä¸­çš„æ¶ˆæ¯å¤„ç†å¤±è´¥

### æ ¹æœ¬åŸå› 
1. **Peer é¢„ç¼“å­˜ä¸å®Œæ•´** â€” å¯åŠ¨æ—¶åªç¼“å­˜äº†æºé¢‘é“ï¼Œæ²¡æœ‰ç¼“å­˜ç›®æ ‡é¢‘é“
2. **é”™è¯¯å¤„ç†ä¸å½“** â€” resolve_peer å¤±è´¥æ—¶ç›´æ¥ returnï¼Œä¸­æ–­æ•´ä¸ªæ¶ˆæ¯å¤„ç†
3. **ç¼ºå°‘åŠ¨æ€ç¼“å­˜** â€” æ¶ˆæ¯å¤„ç†æ—¶æ²¡æœ‰åŠ¨æ€ç¼“å­˜æ–°å‡ºç°çš„é¢‘é“
4. **æ— å¤±è´¥è·Ÿè¸ª** â€” æ²¡æœ‰è®°å½•å¤±è´¥çš„é¢‘é“ï¼Œå¯¼è‡´é‡å¤å°è¯•
5. **è¯Šæ–­ä¿¡æ¯ä¸è¶³** â€” å¤±è´¥æ—¶ç¼ºå°‘è¯¦ç»†çš„è¯Šæ–­å»ºè®®

## ä¿®å¤æ–¹æ¡ˆ

### 1. å…¨å±€ Peer ç¼“å­˜è·Ÿè¸ª

æ·»åŠ äº†ä¸¤ä¸ªå…¨å±€å˜é‡æ¥è·Ÿè¸ª Peer ç¼“å­˜çŠ¶æ€ï¼š

```python
# Global peer cache tracking for failed channels
# Format: {'chat_id': {'error': 'error_message', 'last_attempt': timestamp}}
failed_peers_cache = {}
cached_peers = set()  # Successfully cached peer IDs
```

**ä½œç”¨**ï¼š
- `cached_peers`: è®°å½•æˆåŠŸç¼“å­˜çš„é¢‘é“ IDï¼Œé¿å…é‡å¤ç¼“å­˜
- `failed_peers_cache`: è®°å½•å¤±è´¥çš„é¢‘é“åŠé”™è¯¯ä¿¡æ¯ï¼Œ5åˆ†é’Ÿå†…ä¸é‡è¯•

### 2. cache_peer è¾…åŠ©å‡½æ•°

å®ç°äº†ç»Ÿä¸€çš„ Peer ç¼“å­˜é€»è¾‘ï¼š

```python
def cache_peer(client, chat_id, chat_type="é¢‘é“"):
    """
    å°è¯•ç¼“å­˜ä¸€ä¸ªpeerï¼ˆé¢‘é“/ç¾¤ç»„/ç”¨æˆ·ï¼‰
    Returns: (success: bool, error_message: str or None)
    """
    global failed_peers_cache, cached_peers
    
    # Skip if already cached successfully
    if chat_id in cached_peers:
        return True, None
    
    # Check if recently failed (within last 5 minutes)
    if chat_id in failed_peers_cache:
        last_attempt = failed_peers_cache[chat_id].get('last_attempt', 0)
        if time.time() - last_attempt < 300:  # 5 minutes
            return False, failed_peers_cache[chat_id].get('error', 'Unknown error')
    
    try:
        # Try to resolve the peer
        chat = client.get_chat(int(chat_id))
        cached_peers.add(chat_id)
        
        # Remove from failed cache if it was there
        if chat_id in failed_peers_cache:
            del failed_peers_cache[chat_id]
        
        return True, None
    except ChannelPrivate:
        error_msg = f"æ— æƒè®¿é—®{chat_type}ï¼ˆé¢‘é“/ç¾¤ç»„å¯èƒ½è®¾ä¸ºç§æœ‰ï¼Œæˆ–BotæœªåŠ å…¥ï¼‰"
        failed_peers_cache[chat_id] = {'error': error_msg, 'last_attempt': time.time()}
        return False, error_msg
    except UsernameInvalid:
        error_msg = f"{chat_type}ç”¨æˆ·åæ— æ•ˆ"
        failed_peers_cache[chat_id] = {'error': error_msg, 'last_attempt': time.time()}
        return False, error_msg
    except UsernameNotOccupied:
        error_msg = f"{chat_type}ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤"
        failed_peers_cache[chat_id] = {'error': error_msg, 'last_attempt': time.time()}
        return False, error_msg
    except Exception as e:
        error_msg = f"æ— æ³•è§£æ Peer: {str(e)}"
        failed_peers_cache[chat_id] = {'error': error_msg, 'last_attempt': time.time()}
        return False, error_msg
```

**ç‰¹æ€§**ï¼š
- âœ… é¿å…é‡å¤ç¼“å­˜ï¼ˆæ£€æŸ¥ cached_peersï¼‰
- âœ… 5åˆ†é’Ÿå¤±è´¥é¢‘é“ç¼“å­˜ï¼ˆé¿å…é¢‘ç¹é‡è¯•ï¼‰
- âœ… è¯¦ç»†çš„å¼‚å¸¸åˆ†ç±»ï¼ˆChannelPrivate, UsernameInvalid, UsernameNotOccupiedï¼‰
- âœ… è¿”å›ç»Ÿä¸€çš„æˆåŠŸ/å¤±è´¥çŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯

### 3. å¯åŠ¨æ—¶é¢„ç¼“å­˜å¢å¼º

**æ”¹è¿›å‰**ï¼šåªç¼“å­˜æºé¢‘é“

```python
# Old code
source_ids_to_cache = set()
# ... åªæ”¶é›†æºé¢‘é“ ...
```

**æ”¹è¿›å**ï¼šåŒæ—¶ç¼“å­˜æºé¢‘é“å’Œç›®æ ‡é¢‘é“

```python
# New code
source_ids_to_cache = set()
dest_ids_to_cache = set()

# æ”¶é›†æºé¢‘é“
if source_id not in ["æœªçŸ¥æ¥æº", "me"] and source_id:
    try:
        chat_id_int = int(source_id)
        if chat_id_int < 0:
            source_ids_to_cache.add(source_id)
    except (ValueError, TypeError):
        pass

# æ”¶é›†ç›®æ ‡é¢‘é“ï¼ˆéè®°å½•æ¨¡å¼ï¼‰
if not record_mode and dest_id not in ["æœªçŸ¥ç›®æ ‡", "me"] and dest_id:
    try:
        chat_id_int = int(dest_id)
        if chat_id_int < 0:
            dest_ids_to_cache.add(dest_id)
    except (ValueError, TypeError):
        pass
```

**å¯åŠ¨æ—¥å¿—ç¤ºä¾‹**ï¼š

```
ğŸ”„ å¼€å§‹é¢„åŠ è½½ 4 ä¸ªé¢‘é“ä¿¡æ¯ï¼ˆæºé¢‘é“: 3, ç›®æ ‡é¢‘é“: 1ï¼‰...

ğŸ“¥ é¢„åŠ è½½æºé¢‘é“...
   âœ… æºé¢‘é“ -1002314545813
   âœ… æºé¢‘é“ -1002529437122
   âŒ æºé¢‘é“ -1001234567890: æ— æƒè®¿é—®æºé¢‘é“ï¼ˆé¢‘é“/ç¾¤ç»„å¯èƒ½è®¾ä¸ºç§æœ‰ï¼Œæˆ–BotæœªåŠ å…¥ï¼‰

ğŸ“¤ é¢„åŠ è½½ç›®æ ‡é¢‘é“...
   âœ… ç›®æ ‡é¢‘é“ -1002201840184

============================================================
ğŸ“¦ Peer é¢„ç¼“å­˜å®Œæˆï¼š
   âœ… æˆåŠŸ: 3/4 ä¸ªé¢‘é“
      - æºé¢‘é“: 2/3
      - ç›®æ ‡é¢‘é“: 1/1
   âŒ å¤±è´¥: 1/4 ä¸ªé¢‘é“
      - æºé¢‘é“: 1/3
      - ç›®æ ‡é¢‘é“: 0/1

âš ï¸ å¤±è´¥é¢‘é“è¯¦æƒ…ï¼š
   â€¢ æºé¢‘é“ -1001234567890: æ— æƒè®¿é—®æºé¢‘é“ï¼ˆé¢‘é“/ç¾¤ç»„å¯èƒ½è®¾ä¸ºç§æœ‰ï¼Œæˆ–BotæœªåŠ å…¥ï¼‰

ğŸ’¡ è¯Šæ–­å»ºè®®ï¼š
   1. æ£€æŸ¥ Bot æ˜¯å¦å·²åŠ å…¥è¿™äº›é¢‘é“/ç¾¤ç»„
   2. ç¡®è®¤é¢‘é“/ç¾¤ç»„æ˜¯å¦å­˜åœ¨ä¸”æœªè¢«åˆ é™¤
   3. éªŒè¯é¢‘é“ ID æ˜¯å¦æ­£ç¡®ï¼ˆåº”ä¸ºè´Ÿæ•°ï¼Œå¦‚ -1001234567890ï¼‰
   4. æ£€æŸ¥ Bot æ˜¯å¦æœ‰è®¿é—®æƒé™ï¼ˆç§æœ‰é¢‘é“éœ€è¦é‚€è¯· Botï¼‰
============================================================
```

### 4. æ¶ˆæ¯å¤„ç†æ—¶åŠ¨æ€ç¼“å­˜

**æ”¹è¿›å‰**ï¼šå¤±è´¥æ—¶ç›´æ¥ returnï¼Œä¸­æ–­æ•´ä¸ªå¤„ç†

```python
# Old code
try:
    if message.chat.id:
        acc.get_chat(message.chat.id)
except Exception as e:
    print(f"âš ï¸ æ— æ³•è§£æ Peer {message.chat.id}: {e}")
    return  # âŒ ä¸­æ–­æ•´ä¸ªæ¶ˆæ¯å¤„ç†
```

**æ”¹è¿›å**ï¼šåŠ¨æ€ç¼“å­˜ï¼Œå¤±è´¥æ—¶ç»§ç»­å¤„ç†

```python
# New code
source_chat_str = str(message.chat.id)
if source_chat_str not in cached_peers and source_chat_str not in failed_peers_cache:
    success, error = cache_peer(acc, source_chat_str, "æºé¢‘é“")
    if success:
        print(f"âœ… æˆåŠŸç¼“å­˜æºé¢‘é“ Peer: {message.chat.id}")
    else:
        print(f"âš ï¸ æ— æ³•ç¼“å­˜æºé¢‘é“ Peer {message.chat.id}: {error}")
        # Don't return here - continue processing in case other tasks can handle it
```

**ä¼˜ç‚¹**ï¼š
- âœ… ä¸ä¼šå› ä¸ºå•ä¸ªé¢‘é“å¤±è´¥è€Œä¸­æ–­æ•´ä¸ªæ¶ˆæ¯å¤„ç†
- âœ… åŠ¨æ€ç¼“å­˜æ–°å‡ºç°çš„é¢‘é“
- âœ… åˆ©ç”¨å¤±è´¥ç¼“å­˜é¿å…é‡å¤å°è¯•

### 5. è½¬å‘æ—¶éªŒè¯ç›®æ ‡é¢‘é“

åœ¨è½¬å‘æ¨¡å¼ä¸­ï¼Œæ·»åŠ äº†ç›®æ ‡é¢‘é“çš„ Peer éªŒè¯ï¼š

```python
# Forward mode
else:
    # Ensure dest peer is cached before forwarding (if not "me")
    if dest_chat_id != "me":
        dest_chat_str = str(dest_chat_id)
        if dest_chat_str not in cached_peers:
            # Try to cache the destination peer
            success, error = cache_peer(acc, dest_chat_str, "ç›®æ ‡é¢‘é“")
            if not success:
                print(f"âŒ æ— æ³•ç¼“å­˜ç›®æ ‡é¢‘é“ {dest_chat_id}: {error}")
                print(f"â­ è·³è¿‡æ­¤ä»»åŠ¡ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡...")
                continue  # Skip this task, but continue with others
            else:
                print(f"âœ… æˆåŠŸç¼“å­˜ç›®æ ‡é¢‘é“ Peer: {dest_chat_id}")
    
    # ... ç»§ç»­è½¬å‘é€»è¾‘ ...
```

**ä¼˜ç‚¹**ï¼š
- âœ… è½¬å‘å‰ç¡®ä¿ç›®æ ‡é¢‘é“å¯è®¿é—®
- âœ… å¤±è´¥æ—¶åªè·³è¿‡å½“å‰ä»»åŠ¡ï¼Œä¸å½±å“å…¶ä»–ä»»åŠ¡
- âœ… åŠ¨æ€ç¼“å­˜ç›®æ ‡é¢‘é“

### 6. è¯¦ç»†çš„è¯Šæ–­å»ºè®®

å¯¹äºå¤±è´¥çš„é¢‘é“ï¼Œæä¾›äº†è¯¦ç»†çš„è¯Šæ–­å»ºè®®ï¼š

```
ğŸ’¡ è¯Šæ–­å»ºè®®ï¼š
   1. æ£€æŸ¥ Bot æ˜¯å¦å·²åŠ å…¥è¿™äº›é¢‘é“/ç¾¤ç»„
   2. ç¡®è®¤é¢‘é“/ç¾¤ç»„æ˜¯å¦å­˜åœ¨ä¸”æœªè¢«åˆ é™¤
   3. éªŒè¯é¢‘é“ ID æ˜¯å¦æ­£ç¡®ï¼ˆåº”ä¸ºè´Ÿæ•°ï¼Œå¦‚ -1001234567890ï¼‰
   4. æ£€æŸ¥ Bot æ˜¯å¦æœ‰è®¿é—®æƒé™ï¼ˆç§æœ‰é¢‘é“éœ€è¦é‚€è¯· Botï¼‰
```

## ä¿®å¤æ•ˆæœ

### æ”¹è¿›å‰
- âŒ åªç¼“å­˜æºé¢‘é“ï¼Œç›®æ ‡é¢‘é“åœ¨è½¬å‘æ—¶å¯èƒ½å¤±è´¥
- âŒ å•ä¸ªé¢‘é“å¤±è´¥å¯¼è‡´æ•´ä¸ªæ¶ˆæ¯å¤„ç†ä¸­æ–­
- âŒ æ— å¤±è´¥é¢‘é“è·Ÿè¸ªï¼Œé‡å¤å°è¯•æµªè´¹èµ„æº
- âŒ ç¼ºå°‘è¯Šæ–­ä¿¡æ¯ï¼Œéš¾ä»¥æ’æŸ¥é—®é¢˜

### æ”¹è¿›å
- âœ… åŒæ—¶ç¼“å­˜æºé¢‘é“å’Œç›®æ ‡é¢‘é“
- âœ… å¤±è´¥æ—¶åªè·³è¿‡å½“å‰ä»»åŠ¡ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡
- âœ… 5åˆ†é’Ÿå¤±è´¥é¢‘é“ç¼“å­˜ï¼Œé¿å…é‡å¤å°è¯•
- âœ… è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯å’Œè¯Šæ–­å»ºè®®
- âœ… åŠ¨æ€ç¼“å­˜æœºåˆ¶ï¼Œå¤„ç†æ–°é¢‘é“
- âœ… è¯¦ç»†çš„å¼‚å¸¸åˆ†ç±»å’Œé”™è¯¯ä¿¡æ¯

## éªŒè¯æ–¹æ³•

### 1. è¿è¡Œæµ‹è¯•è„šæœ¬

```bash
python3 test_peer_cache_fix.py
```

æµ‹è¯•å†…å®¹ï¼š
- âœ… å…¨å±€å˜é‡å®šä¹‰
- âœ… cache_peer å‡½æ•°å®ç°
- âœ… å¼‚å¸¸å¤„ç†å®Œæ•´æ€§
- âœ… å¯åŠ¨é¢„ç¼“å­˜é€»è¾‘
- âœ… æ¶ˆæ¯å¤„ç†å™¨æ”¹è¿›
- âœ… ç›®æ ‡é¢‘é“éªŒè¯
- âœ… é…ç½®è§£ææ­£ç¡®æ€§

### 2. å¯åŠ¨ Bot è§‚å¯Ÿæ—¥å¿—

```bash
python3 main.py
```

å…³æ³¨ä»¥ä¸‹æ—¥å¿—ï¼š
1. **å¯åŠ¨é¢„ç¼“å­˜ç»Ÿè®¡**
   - æºé¢‘é“å’Œç›®æ ‡é¢‘é“çš„æ•°é‡
   - æˆåŠŸ/å¤±è´¥çš„è¯¦ç»†ä¿¡æ¯
   
2. **å¤±è´¥é¢‘é“è¯Šæ–­**
   - å¤±è´¥åŸå› ï¼ˆæƒé™ã€ä¸å­˜åœ¨ç­‰ï¼‰
   - è¯Šæ–­å»ºè®®

3. **æ¶ˆæ¯å¤„ç†æ—¥å¿—**
   - åŠ¨æ€ç¼“å­˜æ–°é¢‘é“
   - å¤±è´¥æ—¶è·³è¿‡è€Œéä¸­æ–­

### 3. æµ‹è¯•è½¬å‘åŠŸèƒ½

1. é…ç½®ç›‘æ§ä»»åŠ¡ï¼ˆåŒ…æ‹¬ticketä¸­æåˆ°çš„é¢‘é“ï¼‰
2. å‘é€æµ‹è¯•æ¶ˆæ¯åˆ°ç›‘æ§é¢‘é“
3. è§‚å¯Ÿå¤„ç†æ—¥å¿—ï¼š
   - æ˜¯å¦æ­£å¸¸è½¬å‘
   - å¤±è´¥é¢‘é“æ˜¯å¦æœ‰è¯¦ç»†é”™è¯¯ä¿¡æ¯
   - æ˜¯å¦ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡

## ç›¸å…³æ–‡ä»¶

- `main.py` - ä¸»è¦ä¿®æ”¹æ–‡ä»¶
  - æ·»åŠ å…¨å±€å˜é‡ `failed_peers_cache` å’Œ `cached_peers`
  - æ–°å¢ `cache_peer()` å‡½æ•°
  - å¢å¼º `print_startup_config()` å‡½æ•°
  - æ”¹è¿› `auto_forward()` æ¶ˆæ¯å¤„ç†å™¨
  
- `test_peer_cache_fix.py` - æµ‹è¯•è„šæœ¬
  - éªŒè¯æ‰€æœ‰ä¿®å¤ç‚¹
  - æµ‹è¯•é…ç½®è§£æé€»è¾‘

## æŠ€æœ¯ç»†èŠ‚

### Pyrogram Peer ç³»ç»Ÿ

Pyrogram ä½¿ç”¨ peer ç³»ç»Ÿæ¥ç®¡ç†èŠå¤©å¯¹è±¡ï¼ˆç”¨æˆ·ã€ç¾¤ç»„ã€é¢‘é“ï¼‰ï¼š

1. **Peer ID æ ¼å¼**ï¼š
   - ç”¨æˆ·ï¼šæ­£æ•´æ•° (e.g., 123456789)
   - ç¾¤ç»„/é¢‘é“ï¼šè´Ÿæ•´æ•° (e.g., -1001234567890)

2. **Peer ç¼“å­˜æœºåˆ¶**ï¼š
   - Pyrogram å°† peer ä¿¡æ¯å­˜å‚¨åœ¨ SQLite session æ–‡ä»¶ä¸­
   - é¦–æ¬¡è®¿é—®æ—¶éœ€è¦ resolve peerï¼ˆé€šè¿‡ `get_chat()` æˆ– `resolve_peer()`ï¼‰
   - ç¼“å­˜åå¯ä»¥ç›´æ¥ä½¿ç”¨ chat_id è¿›è¡Œæ“ä½œ

3. **"Peer id invalid" é”™è¯¯**ï¼š
   - å½“ session ä¸­æ²¡æœ‰ peer ä¿¡æ¯æ—¶æŠ›å‡º
   - éœ€è¦å…ˆè°ƒç”¨ `get_chat()` åŠ è½½ peer ä¿¡æ¯

### ä¸ºä»€ä¹ˆéœ€è¦é¢„ç¼“å­˜ï¼Ÿ

1. **é¿å…è¿è¡Œæ—¶é”™è¯¯**ï¼šæ¶ˆæ¯å¤„ç†æ—¶å¦‚æœ peer æœªç¼“å­˜ä¼šæŠ›å‡ºå¼‚å¸¸
2. **æé«˜å“åº”é€Ÿåº¦**ï¼šé¢„ç¼“å­˜åæ¶ˆæ¯å¤„ç†æ— éœ€ç­‰å¾… peer è§£æ
3. **æ—©æœŸå‘ç°é—®é¢˜**ï¼šå¯åŠ¨æ—¶éªŒè¯é¢‘é“å¯è®¿é—®æ€§ï¼ŒåŠæ—©å‘ç°é…ç½®é—®é¢˜
4. **å‡å°‘ API è°ƒç”¨**ï¼šæˆåŠŸç¼“å­˜åæ— éœ€é‡å¤è°ƒç”¨ `get_chat()`

### å¤±è´¥é¢‘é“ç¼“å­˜ç­–ç•¥

**ä¸ºä»€ä¹ˆè®¾ç½®5åˆ†é’Ÿï¼Ÿ**
- é¿å…é¢‘ç¹é‡è¯•å¤±è´¥çš„é¢‘é“ï¼ˆé™ä½ API è°ƒç”¨ï¼‰
- ç»™äºˆè¶³å¤Ÿæ—¶é—´è®©ç®¡ç†å‘˜ä¿®å¤é—®é¢˜ï¼ˆåŠ å…¥é¢‘é“ã€ä¿®å¤æƒé™ç­‰ï¼‰
- 5åˆ†é’Ÿåè‡ªåŠ¨é‡è¯•ï¼Œä»¥é˜²é—®é¢˜å·²ä¿®å¤

**ç¼“å­˜ç»“æ„**ï¼š
```python
failed_peers_cache = {
    "-1001234567890": {
        "error": "æ— æƒè®¿é—®é¢‘é“ï¼ˆé¢‘é“/ç¾¤ç»„å¯èƒ½è®¾ä¸ºç§æœ‰ï¼Œæˆ–BotæœªåŠ å…¥ï¼‰",
        "last_attempt": 1234567890.123
    }
}
```

## å…¼å®¹æ€§

- âœ… å®Œå…¨å‘åå…¼å®¹
- âœ… ä¸å½±å“ç°æœ‰ç›‘æ§ä»»åŠ¡
- âœ… æ”¯æŒæ—§æ ¼å¼å’Œæ–°æ ¼å¼é…ç½®
- âœ… ä¸ä¿®æ”¹æ•°æ®åº“ç»“æ„
- âœ… ä¸ä¿®æ”¹ API æ¥å£

## æ€§èƒ½å½±å“

- **å¯åŠ¨æ—¶é—´**ï¼šå¢åŠ é¢„ç¼“å­˜æ—¶é—´ï¼ˆæ¯ä¸ªé¢‘é“çº¦0.1-0.5ç§’ï¼‰
- **å†…å­˜å ç”¨**ï¼šå¿½ç•¥ä¸è®¡ï¼ˆåªå­˜å‚¨é¢‘é“ ID å’Œç®€å•å…ƒæ•°æ®ï¼‰
- **è¿è¡Œæ—¶æ€§èƒ½**ï¼šæå‡ï¼ˆé¿å…é‡å¤å°è¯•å¤±è´¥çš„é¢‘é“ï¼‰
- **API è°ƒç”¨**ï¼šå‡å°‘ï¼ˆå¤±è´¥é¢‘é“5åˆ†é’Ÿå†…ä¸é‡è¯•ï¼‰

## æ€»ç»“

æ­¤æ¬¡ä¿®å¤é€šè¿‡ä»¥ä¸‹æ”¹è¿›ï¼Œå½»åº•è§£å†³äº†å¤šé¢‘é“ Peer ID ç¼“å­˜å¤±æ•ˆé—®é¢˜ï¼š

1. **å…¨å±€ç¼“å­˜è·Ÿè¸ª** - è®°å½•æˆåŠŸå’Œå¤±è´¥çš„é¢‘é“
2. **ç»Ÿä¸€ç¼“å­˜å‡½æ•°** - cache_peer() æä¾›ä¸€è‡´çš„ç¼“å­˜é€»è¾‘
3. **å®Œæ•´é¢„ç¼“å­˜** - æºé¢‘é“å’Œç›®æ ‡é¢‘é“éƒ½é¢„å…ˆç¼“å­˜
4. **åŠ¨æ€ç¼“å­˜** - æ¶ˆæ¯å¤„ç†æ—¶è‡ªåŠ¨ç¼“å­˜æ–°é¢‘é“
5. **å®¹é”™å¤„ç†** - å¤±è´¥ä¸ä¸­æ–­ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡
6. **è¯¦ç»†è¯Šæ–­** - æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯å’Œä¿®å¤å»ºè®®
7. **æ™ºèƒ½é‡è¯•** - 5åˆ†é’Ÿå¤±è´¥ç¼“å­˜é¿å…é¢‘ç¹é‡è¯•

**ç‰ˆæœ¬**: v2.3.3  
**æ—¥æœŸ**: 2024  
**æµ‹è¯•çŠ¶æ€**: âœ… é€šè¿‡æ‰€æœ‰æµ‹è¯•
