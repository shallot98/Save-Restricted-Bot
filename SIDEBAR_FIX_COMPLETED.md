# ä¾§è¾¹æ ä¸ FOUC ä¿®å¤æŠ¥å‘Š

## âœ… å®Œæˆçš„ä¿®å¤

1. **é¦–å±é—ªçƒ (FOUC) ä¿®å¤**
   - åœ¨ `templates/notes.html` çš„ `<head>` ä¸­æ³¨å…¥äº†åŒæ­¥çŠ¶æ€è¯»å–è„šæœ¬ã€‚
   - å®ç°äº† `window.__NOTES_INITIAL_STATE__` é¢„è®¡ç®—ï¼ŒåŒ…å« `sidebarOpen` å’Œ `darkMode`ã€‚
   - ç¡®ä¿ `tailwind.config` åœ¨ CDN åŠ è½½å‰å®šä¹‰ã€‚

2. **çŠ¶æ€ç®¡ç†ç»Ÿä¸€**
   - **Alpine.js**: æ›´æ–°äº† `init()`, `toggleSidebar()`, `closeSidebar()`ï¼Œç¡®ä¿æ¡Œé¢ç«¯çŠ¶æ€æŒä¹…åŒ–åˆ° `mobileUIState`ã€‚
   - **Legacy JS (`sidebar.js`)**: ç§»é™¤äº† resize äº‹ä»¶æ—¶çš„è‡ªåŠ¨å¼€å…³é€»è¾‘ï¼Œé˜²æ­¢æ„å¤–è¦†ç›–ç”¨æˆ·çŠ¶æ€ã€‚
   - **é»˜è®¤ç­–ç•¥**: æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯é¦–æ¬¡è®¿é—®å‡é»˜è®¤ä¸º**å…³é—­**çŠ¶æ€ï¼Œé™¤éæœ‰å†å²è®°å½•ã€‚

3. **è§†è§‰ä¼˜åŒ–**
   - ç»™ `templates/components/sidebar.html` æ·»åŠ äº† `x-cloak`ï¼Œé…åˆ CSS éšè—æœªåˆå§‹åŒ–å…ƒç´ ã€‚
   - ç¡®è®¤ `templates/components/topbar.html` ä¸­çš„ä¸»é¢˜å›¾æ ‡å·²æœ‰ `x-cloak`ã€‚
   - ä¼˜åŒ–äº†ä¾§è¾¹æ çš„ç‚¹å‡»é®ç½©å…³é—­é€»è¾‘ã€‚

## ğŸ” éªŒè¯æ£€æŸ¥ç‚¹

1. **å¼ºåˆ¶åˆ·æ–°é¡µé¢ (Ctrl+F5)**:
   - é¡µé¢ä¸åº”å‡ºç°ä»"ç™½åº•"è·³å˜"é»‘åº•"çš„é—ªçƒï¼ˆå¦‚æœåœ¨æš—è‰²æ¨¡å¼ä¸‹ï¼‰ã€‚
   - ä¾§è¾¹æ ä¸åº”ç¬é—´æ˜¾ç¤ºåˆæ¶ˆå¤±ã€‚

2. **æ¡Œé¢ç«¯æµ‹è¯•**:
   - æ‰“å¼€ä¾§è¾¹æ  -> åˆ·æ–° -> ä¾§è¾¹æ åº”**ä¿æŒæ‰“å¼€**ã€‚
   - å…³é—­ä¾§è¾¹æ  -> åˆ·æ–° -> ä¾§è¾¹æ åº”**ä¿æŒå…³é—­**ã€‚

3. **ç§»åŠ¨ç«¯æµ‹è¯•**:
   - è°ƒæ•´çª—å£å¤§å° -> ä¾§è¾¹æ çŠ¶æ€ä¸åº”è‡ªåŠ¨æ”¹å˜ã€‚
   - åˆ·æ–°é¡µé¢ -> ä¾§è¾¹æ åº”å§‹ç»ˆé»˜è®¤å…³é—­ã€‚

## ğŸ“ ä¿®æ”¹æ–‡ä»¶åˆ—è¡¨
- `templates/notes.html`
- `templates/components/sidebar.html`
- `templates/components/topbar.html` (æ£€æŸ¥)
- `static/js/components/sidebar.js`